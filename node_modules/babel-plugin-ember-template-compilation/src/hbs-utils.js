"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.astNodeHasBinding = void 0;
function astNodeHasBinding(target, name) {
    var _a;
    let cursor = target;
    while (cursor) {
        let parentNode = (_a = cursor.parent) === null || _a === void 0 ? void 0 : _a.node;
        if ((parentNode === null || parentNode === void 0 ? void 0 : parentNode.type) === 'ElementNode' &&
            parentNode.blockParams.includes(name) &&
            // an ElementNode's block params are valid only within its children
            parentNode.children.includes(cursor.node)) {
            return true;
        }
        if ((parentNode === null || parentNode === void 0 ? void 0 : parentNode.type) === 'Block' &&
            parentNode.blockParams.includes(name) &&
            // a Block's blockParams are valid only within its body
            parentNode.body.includes(cursor.node)) {
            return true;
        }
        cursor = cursor.parent;
    }
    return false;
}
exports.astNodeHasBinding = astNodeHasBinding;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGJzLXV0aWxzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiaGJzLXV0aWxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUVBLFNBQWdCLGlCQUFpQixDQUFDLE1BQThCLEVBQUUsSUFBWTs7SUFDNUUsSUFBSSxNQUFNLEdBQWtDLE1BQU0sQ0FBQztJQUNuRCxPQUFPLE1BQU0sRUFBRTtRQUNiLElBQUksVUFBVSxHQUFHLE1BQUEsTUFBTSxDQUFDLE1BQU0sMENBQUUsSUFBSSxDQUFDO1FBQ3JDLElBQ0UsQ0FBQSxVQUFVLGFBQVYsVUFBVSx1QkFBVixVQUFVLENBQUUsSUFBSSxNQUFLLGFBQWE7WUFDbEMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDO1lBQ3JDLG1FQUFtRTtZQUNuRSxVQUFVLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsSUFBdUIsQ0FBQyxFQUM1RDtZQUNBLE9BQU8sSUFBSSxDQUFDO1NBQ2I7UUFFRCxJQUNFLENBQUEsVUFBVSxhQUFWLFVBQVUsdUJBQVYsVUFBVSxDQUFFLElBQUksTUFBSyxPQUFPO1lBQzVCLFVBQVUsQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQztZQUNyQyx1REFBdUQ7WUFDdkQsVUFBVSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLElBQXVCLENBQUMsRUFDeEQ7WUFDQSxPQUFPLElBQUksQ0FBQztTQUNiO1FBRUQsTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7S0FDeEI7SUFDRCxPQUFPLEtBQUssQ0FBQztBQUNmLENBQUM7QUF6QkQsOENBeUJDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBBU1R2MSwgV2Fsa2VyUGF0aCB9IGZyb20gJ0BnbGltbWVyL3N5bnRheCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBhc3ROb2RlSGFzQmluZGluZyh0YXJnZXQ6IFdhbGtlclBhdGg8QVNUdjEuTm9kZT4sIG5hbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICBsZXQgY3Vyc29yOiBXYWxrZXJQYXRoPEFTVHYxLk5vZGU+IHwgbnVsbCA9IHRhcmdldDtcbiAgd2hpbGUgKGN1cnNvcikge1xuICAgIGxldCBwYXJlbnROb2RlID0gY3Vyc29yLnBhcmVudD8ubm9kZTtcbiAgICBpZiAoXG4gICAgICBwYXJlbnROb2RlPy50eXBlID09PSAnRWxlbWVudE5vZGUnICYmXG4gICAgICBwYXJlbnROb2RlLmJsb2NrUGFyYW1zLmluY2x1ZGVzKG5hbWUpICYmXG4gICAgICAvLyBhbiBFbGVtZW50Tm9kZSdzIGJsb2NrIHBhcmFtcyBhcmUgdmFsaWQgb25seSB3aXRoaW4gaXRzIGNoaWxkcmVuXG4gICAgICBwYXJlbnROb2RlLmNoaWxkcmVuLmluY2x1ZGVzKGN1cnNvci5ub2RlIGFzIEFTVHYxLlN0YXRlbWVudClcbiAgICApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgIHBhcmVudE5vZGU/LnR5cGUgPT09ICdCbG9jaycgJiZcbiAgICAgIHBhcmVudE5vZGUuYmxvY2tQYXJhbXMuaW5jbHVkZXMobmFtZSkgJiZcbiAgICAgIC8vIGEgQmxvY2sncyBibG9ja1BhcmFtcyBhcmUgdmFsaWQgb25seSB3aXRoaW4gaXRzIGJvZHlcbiAgICAgIHBhcmVudE5vZGUuYm9keS5pbmNsdWRlcyhjdXJzb3Iubm9kZSBhcyBBU1R2MS5TdGF0ZW1lbnQpXG4gICAgKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBjdXJzb3IgPSBjdXJzb3IucGFyZW50O1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbiJdfQ==